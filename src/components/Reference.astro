---
interface Props {
	image: ImageMetadata;
	odd?: boolean;
}

const { image, odd } = Astro.props;
---

<div class:list={["wrap", {odd}]}>
	<svg height="0" width="0">
		<defs>
			<clipPath id="referenceClipPathLeft" clipPathUnits="objectBoundingBox">
				<path d="M 0 0 L 0.93 0 C 1 0.5 1 0.5 0.93 1 L 0 1 L 0 0"></path>
			</clipPath>
			<clipPath id="referenceClipPathRight" clipPathUnits="objectBoundingBox">
				<path d="M 1 0 L 0.07 0 C 0 0.5 0 0.5 0.07 1 L 1 1 L 1 0"></path>
			</clipPath>
		</defs>
	</svg>
	<div class="image">
		<img src={image.src} width={image.width} height={image.height} />
	</div>
	<div class="text">
		<div class="textInner">
			<slot />
		</div>
	</div>
</div>

<style>
	.wrap {
		position: relative;
	}
	
	.wrap::after {
		content: '';
		display: block;
		clear:both;
		position:relative;
	}

	.image {
		width: calc(50% + 100px);
		height: 100%;
		display: block;
		position: absolute;
		right: 0;
		top: 0;
		overflow: hidden;
		z-index:1;
		clip-path: url(#referenceClipPathRight);
	}

	.image img {
		display: block;
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	.text {
		width: 100%;
		height: 100%;
		max-width: var(--content-width);
		padding: 0 var(--content-padding);
		margin: 0 auto;
		display: block;
		box-sizing: border-box;
	}

	.textInner {
		display: block;
		width: 100%;
		padding: 3rem calc(50% + 100px) 3rem 0;
		box-sizing: border-box;
	}

	.odd .image {
		right: auto;
		left: 0;
		clip-path: url(#referenceClipPathLeft);
	}

	.odd .textInner {
		padding-right: 0;
		padding-left: calc(50% + 100px);
	}
</style>